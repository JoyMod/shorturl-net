# 项目测试指南

本文档旨在为测试团队提供关于 `shorturl-platform` 项目的测试策略、工具和流程的全面指导。

## 1. 自动化测试

项目包含一套自动化集成测试，用于验证核心功能的正确性。这些测试可以在不依赖外部服务（如MySQL）的情况下独立运行。

### 1.1. 如何运行测试

在运行测试之前，请确保您已安装 Go (版本 1.18 或更高)。

1.  **打开终端**：导航到项目的根目录 `D:/shorturl-net/`。

2.  **运行所有测试**：执行以下命令，运行项目中的所有测试用例。添加 `-v` 标志可以输出详细的测试过程和结果。

    ```bash
    go test -v ./...
    ```

3.  **运行特定包的测试**：如果只想运行 `handler` 包下的测试，可以指定路径：

    ```bash
    go test -v ./internal/handler
    ```

### 1.2. 解读测试结果

*   **PASS**: 表示测试成功通过。
*   **FAIL**: 表示测试失败。终端会详细输出哪个断言失败了，以及期望值和实际值的差异。
*   **--- SKIP**: 表示某个测试被跳过。

如果出现 `FAIL`，请根据失败信息进行初步判断，并将详细的日志和复现步骤记录到Bug报告中。

### 1.3. 自动化测试覆盖范围

当前的集成测试 (`TestShortLinkHandler_Integration`) 主要覆盖以下核心用户流程：

*   **创建短链接**：
    *   验证 `/api/shorten` 接口在收到有效的长链接后，能否成功返回 `201 Created` 状态。
    *   验证响应体中是否包含了生成的短链接 URL。
*   **重定向**：
    *   验证访问生成的短码时，服务能否返回 `302 Found` 重定向状态。
    *   验证重定向的目标地址是否与原始的长链接完全一致。

## 2. 手动测试清单

虽然自动化测试覆盖了核心逻辑，但仍有一些场景需要手动验证。

| 测试模块 | 测试项 | 预期结果 |
| --- | --- | --- |
| **用户认证** | 访问 `/api/me` (未登录) | 返回 `401 Unauthorized` 错误。 |
| | 使用错误的用户名/密码登录 `/auth/login` | 返回 `401 Unauthorized` 或 `400 Bad Request`。 |
| | 成功登录后，携带 Token 访问 `/api/me` | 成功返回当前用户信息。 |
| **输入验证** | 创建短链接时，提供一个无效的 URL | 返回 `400 Bad Request` 错误。 |
| **Swagger UI** | 访问 `http://localhost:8080/swagger/index.html` | 页面能正常加载，所有 API 接口都可见。 |
| | 在 Swagger 页面上尝试 "Try it out" 功能 | 接口能够被成功调用并返回结果。 |
| **并发测试** | (可选) 使用工具（如 `ab`, `JMeter`）模拟100个并发请求到 `/api/shorten` | 所有请求都应在合理时间内成功返回，不应出现服务崩溃或大量5xx错误。 |

## 3. 如何报告问题

当您发现一个 Bug 时，请创建一个新的 Issue，并遵循以下模板：

*   **标题**: 简明扼要地描述问题，例如 `[BUG] 访问已禁用的短链接时返回 500 错误`。
*   **复现步骤**:
    1.  执行了什么操作...
    2.  点击了什么按钮...
    3.  提供了什么输入...
*   **期望结果**: 描述在这些步骤之后，您期望发生什么。
*   **实际结果**: 描述实际发生了什么，并附上相关的截图或错误日志。
*   **环境信息**:
    *   操作系统 (e.g., Windows 11, macOS Sonoma)
    *   浏览器 (e.g., Chrome 125)
    *   后端服务版本 (可通过 Git commit hash 确定)

---
这份文档为测试人员提供了清晰的起点。随着项目的发展，您可以持续更新这份文档，添加更多的测试用例和场景。
